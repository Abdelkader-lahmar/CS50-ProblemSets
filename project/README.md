# CS:Pass
## Video Demo:  [Watch](https://youtu.be/XFjRzVo2o_c)
## Description:
### description of app.py pages ðŸ‘‡:
This file starts with importing the needed libraries which are:
* Re: for regular expressions.
* Flask: the main framework.
* Flask_mail: to send mails to users.
* Func: file in my project, explain it later.
* Sqlalchemy: for database.
* Model: file in my project includes the model of database.
* Werkzeug.SÃ©curitÃ© : for hashing passwords.
* Secrets: for encrypting data.

The the file contains some configuration of the server.
#### Register:
When a new user enters the website, the login page will appear so he will go to the registration page where he will insert his username, email and password and click register. The website will verify the user's information with a regular expression before inserting it into the database. In case the email exists, the user will be directed to an error page that explains the problem. To ensure security, the user's password will be hashed and stored, and salt will be generated for the user to encrypt the data. An error page will appear if the user fails to provide one of the necessary information.
#### login:
After signing up, the website will direct the user to the login page, where they must input their email and password to access their vault. When the user submits the form, the website will check if the email exists. If it does, it will hash the password submitted by the user and compare it with the one stored in the database. If the match is found, the website will store the user's ID, salt, and Row password in the session to decrypt the data. In case they don't match, an error page will show up. If the user loses their password, they have the option to click 'Forgot Password' and reset it for their account.
#### reset-password:
The user will type their email here. A new token will be generated by the website and paired with the user, while a new link will be generated that contains that token and sent to the user's email via flask_mail. Visiting that link will allow the user to create a new password. The web application will verify it using a regular expression, hash it, and save it in a database when he submits it. In this case, all the user's information will be deleted because it is encrypted with the row password that has been lost.
#### vault:
The page is straightforward in that it captures all the stored data that has a connection to the user and Display it on the user's screen in cards that show the site, logo, and button for accessing the data.
#### card:
If the user wants to access their data, they should click the button next to the site name. The card he chooses will be captured and its information will be exported to a page. On that page, the user can access the domain, email, and  the password which will be decrypted. The user has the option to either modify their data on that card or copy the information by clicking the 'Copy' button. This card can be deleted by him if he no longer needs it.
#### addcard:
The user can store new data on this page. It requires the domain name of the site where the user wants to store data, as well as their email and password. The website will verify the information sent by the user and then encrypt the password with the user's row password and salt stored in the session. The database will store everything afterwards.
#### editcard:
If the user wants to change the data that are stored in the card he can click the button next to the site name, here the user can change the information on that card then click "edit". The server will grab that card and inject the new information that the user provide.
#### deletecard:
the user also has the option to delete that card if he no longer needs it, where the server deletes that card from its database.
#### account:
If the user wants to see his information, all he needs to do is click the 'Account' button at the bottom right. He will be directed to a different page where his name and email will be displayed.
#### changeinfo:
If he changes the displayed data and clicks 'change', the website will grab the new data, verify it, and then change it in the database.
#### changepass:
In the case that the user wants to change his password on the same page, he can type his current password and type the new password he wants, then click 'change'. The web application will obtain the password entered in 'old password', hash it, and compare it to the one in the database. If they match, the server will grab all the user's data and decrypt it. Following that, he will take the new password, check it, and then encrypt the data with the new password. Then It will be stored in the database after it has been hashed.

### description of func.py:
This file contains functions that are used multiple times in my code which are:
encrypt, decrypt: two functions, one for encrypting data and the other for decrypting it.
login_required: used to check if the user loged in.
fixdomain: used as a filter for Jinja to ensure that the domain name appears good on the main page.
apology: generate an error page to be displayed to the user

### description of model.py:
This file is linked to SQLALchemy to model my database, which contains three tables: one to store all users, one to store all user data, and the third one to store reset password requests.
- The users table has 5 columns: ID, user name, email, master password, which is usually the hash of the password, and user salt, which is used to encrypt data.
- Passes is the table that stores all the user's data, it has 5 columns: id of the pass, user_id that own this data, domain that the password belongs to, email on that site, and the actual password used in that site.
- This table stores tokens that are generated by the reset function from the app.Py and link it to the user via user ID. So the users who forget their password can be tracked by the website and tokens can be disabled when they reset them.

### description of instance folder:
This folder will appear and remain once the website is launched for the first time. It contains the database which will be generated by SQLAlchemy.

### description of Templates folder:
There isn't much to talk about this folder, except that it includes the main layout of the website 'Layout.html' and the structure of all pages.

### description of Static folder:
This folder contains files that don't change regularly, including the favicon icon of the website and the 'style.css' file, which contains the styling of all elements on all pages.
